head	1.2;
access;
symbols;
locks
	schlote:1.2; strict;
comment	@ * @;


1.2
date	96.02.24.12.37.34;	author schlote;	state Exp;
branches;
next	1.1;

1.1
date	96.02.24.11.41.56;	author schlote;	state Exp;
branches;
next	1.0;

1.0
date	96.02.24.11.19.50;	author schlote;	state Exp;
branches;
next	;


desc
@Converter for Braindead motorola assembler :-(
Just for case there is a new version... save work !
@


1.2
log
@abgebrochen, per ced macros geht einfacher
@
text
@
/*-------------------------------------------------------------------------------
**  /\  |\     Silicon Department      Telefax     06404-64760
**  \_ o| \_ _  Software Entwicklung    Telefon        06404-7996
**    \|| |_)|)   Carsten Schlote         Egelseeweg 52     35423 Lich
** \__/||_/\_|     Branko Mikiç            Limmerstrasse 10   30451 Hannover
**-------------------------------------------------------------------------------
** ALL RIGHTS ON THIS SOURCES RESERVED TO SILICON DEPARTMENT SOFTWARE
**
** $Id: convert.c 1.1 1996/02/24 11:41:56 schlote Exp schlote $
**
*/

#include <stdio.h>
#include <stdlib.h>
#define  USE_BUILTIN_MATH
#include <string.h>
#include <ctype.h>

#include <exec/types.h>

void TranslateBuffer(TEXT *buffer)
{
int i,x;
TEXT *p,c, work[256],work1[256];

	for ( p=buffer,i=0; *p!=0; p++,i++ )
	{
      c = buffer[i];

		if ( c == '\n' ) { *(p++) = '\n'; break ; }

		if ( isspace(c) )
		{
			if      ( i==0 ) *(p++) = '\t';
         else if ( !isspace(*(p-1)) ) *(p++) = c;
			continue;
     	}
      switch( c )
      {
      case '#'	:	*p='*'; break;
      }

	}
   *p = 0;

	if ( sscanf(buffer,"set %s, 0x%x\n",work, &x) == 2 )
		sprintf(buffer,"%s	equ	$%x\n",work,x);

}




void main(int argc, char *argv[])
{
FILE *in, *out;
TEXT buffer[256];

	printf("Intel Motorola 2 Standard Assembly Converter.\n\n");

	printf("Open file '%s'\n",argv[1]);
	if ( in = fopen( argv[1],"r") )
	{
		printf("Open file '%s'\n",argv[2]);
		if ( out = fopen( argv[2],"w") )
		{
      	while ( fgets(buffer,256,in) )
      	{
            TranslateBuffer(buffer);
            if ( fputs( buffer, out) )
            {
            	printf("*** error on file write\n");
            	break;
            }
      	}

			fclose(out);
		}
		fclose(in);
	}
}

@


1.1
log
@-
@
text
@d10 1
a10 1
** $Id: convert.c 1.0 1996/02/24 11:19:50 schlote Exp schlote $
d18 1
d25 1
a25 1
TEXT *p,work[256];
d27 1
a27 1
	for ( p=buffer; *p!=0; p++ )
d29 11
a39 1
      switch( *p )
d43 1
d45 4
a49 2
	if ( sscanf(buffer," short 0x%x %s\n",&x, work) == 2 )
		sprintf(buffer,"  	dc.w	$%x		%s\n",x,work);
d54 1
d65 1
a65 1
		printf("Open file '%s'\n",argv[1]);
d71 1
a71 1
            if ( !fputs( buffer, out) )
@


1.0
log
@Initial revision
@
text
@d10 1
a10 1
** $Id$
d19 1
d21 1
a21 1
void main(void)
d23 44
a66 1
FILE
@
